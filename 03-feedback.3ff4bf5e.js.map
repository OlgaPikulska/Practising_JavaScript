{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SC0BAC,EA1Ba,SAACC,EAAKC,GACjB,IACE,IAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAqB7CV,EAjBa,SAAAC,GACX,IACE,IAAME,EAAkBG,aAAaK,QAAQV,GAC7C,OAA2B,OAApBE,OAA2BS,EAAYR,KAAKS,MAAMV,E,CACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAY7CV,EARe,SAAAC,GACX,IACIK,aAAaQ,WAAWb,E,CAC1B,MAAOO,GACLC,QAAQD,MAAM,sBAAuBA,EAAME,Q,GDpB7CK,EAAOC,SAASC,cAAc,SAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAOH,SAASC,cAAc,kBAC9BG,EAAmB,sBAGzBD,EAAKE,iBAAiB,QAASC,EAAAxB,GAAEyB,UAEjC,WACI,IAAMC,EAAW,CACbC,MAAOV,EAAKb,MACZQ,QAASQ,EAAQhB,OAErBF,EAAqBoB,EAAkBI,E,GAPW,MAStD,IAAME,EAAc1B,EAAqBoB,GAEzCO,OAAON,iBAAiB,QAExB,WACQK,GACAX,EAAKb,MAAQwB,EAAYD,MACzBP,EAAQhB,MAAQwB,EAAYhB,UAE5BK,EAAKb,MAAQ,IACbgB,EAAQhB,MAAQ,I,IAIxBiB,EAAKE,iBAAiB,UAEtB,SAAqBO,GACjBA,EAAMC,iBACNpB,QAAQqB,IAAIJ,GACZP,EAAKY,QACL/B,EAAuBoB,E","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["import _ from 'lodash';\nimport * as storage from './storage';\nconst mail = document.querySelector(\"input\")\nconst message = document.querySelector(\"textarea\")\nconst form = document.querySelector(\".feedback-form\");\nconst LOCALSTORAGE_KEY = \"feedback-form-state\";\n\n\nform.addEventListener(\"input\", _.throttle(saveMessage,1000));\n\nfunction saveMessage() {\n    const feedback = {\n        email: mail.value,\n        message: message.value,\n    }\n    storage.default.save(LOCALSTORAGE_KEY, feedback);\n}\nconst parsedInput = storage.default.load(LOCALSTORAGE_KEY);\n\nwindow.addEventListener(\"load\", checkStorage)\n\nfunction checkStorage() {\n    if (parsedInput) {\n        mail.value = parsedInput.email;\n        message.value = parsedInput.message;  \n    } else {\n        mail.value = \" \";\n        message.value = \" \";\n    }\n}\n\nform.addEventListener(\"submit\", afterSubmit)\n\nfunction afterSubmit(event) {\n    event.preventDefault();\n    console.log(parsedInput)\n    form.reset();\n    storage.default.remove(LOCALSTORAGE_KEY);\n}","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n    try {\n        localStorage.removeItem(key);\n    } catch (error) {\n        console.error(\"Remove state error:\", error.message)\n    }\n};\n\nexport default {\n    save,\n    load,\n    remove,\n};"],"names":["$1WSnx","parcelRequire","$e40a24b7fc93604f$export$2e2bcd8739ae039","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","removeItem","$b00c40859be242c5$var$mail","document","querySelector","$b00c40859be242c5$var$message","$b00c40859be242c5$var$form","$b00c40859be242c5$var$LOCALSTORAGE_KEY","addEventListener","$parcel$interopDefault","throttle","feedback","email","$b00c40859be242c5$var$parsedInput","window","event","preventDefault","log","reset"],"version":3,"file":"03-feedback.3ff4bf5e.js.map"}