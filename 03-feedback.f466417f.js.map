{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,IC0BAC,EA1Ba,CAACC,EAAKC,KACjB,IACE,MAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAqB7CV,EAjBaC,IACX,IACE,MAAME,EAAkBG,aAAaK,QAAQV,GAC7C,OAA2B,OAApBE,OAA2BS,EAAYR,KAAKS,MAAMV,E,CACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAY7CV,EAReC,IACX,IACIK,aAAaQ,WAAWb,E,CAC1B,MAAOO,GACLC,QAAQD,MAAM,sBAAuBA,EAAME,Q,GDpBnD,MAAMK,EAAOC,SAASC,cAAc,SAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAOH,SAASC,cAAc,kBAIpCE,EAAKC,iBAAiB,QAASC,EAAAvB,GAAEwB,UAEjC,WACI,MAAMC,EAAW,CACbC,MAAOT,EAAKb,MACZQ,QAASQ,EAAQhB,OAErBF,EAVqB,sBAUkBuB,E,GAPW,MAStD,MAAME,EAAczB,EAZK,uBAczB0B,OAAON,iBAAiB,QAExB,WACQK,GACAV,EAAKb,MAAQuB,EAAYD,MACzBN,EAAQhB,MAAQuB,EAAYf,UAE5BK,EAAKb,MAAQ,IACbgB,EAAQhB,MAAQ,I,IAIxBiB,EAAKC,iBAAiB,UAEtB,SAAqBO,GACjBA,EAAMC,iBACNnB,QAAQoB,IAAIJ,GACZN,EAAKW,QACL9B,EAhCqB,sB","sources":["src/js/03-feedback.js","src/js/storage.js"],"sourcesContent":["import _ from 'lodash';\nimport * as storage from './storage';\nconst mail = document.querySelector(\"input\")\nconst message = document.querySelector(\"textarea\")\nconst form = document.querySelector(\".feedback-form\");\nconst LOCALSTORAGE_KEY = \"feedback-form-state\";\n\n\nform.addEventListener(\"input\", _.throttle(saveMessage,1000));\n\nfunction saveMessage() {\n    const feedback = {\n        email: mail.value,\n        message: message.value,\n    }\n    storage.default.save(LOCALSTORAGE_KEY, feedback);\n}\nconst parsedInput = storage.default.load(LOCALSTORAGE_KEY);\n\nwindow.addEventListener(\"load\", checkStorage)\n\nfunction checkStorage() {\n    if (parsedInput) {\n        mail.value = parsedInput.email;\n        message.value = parsedInput.message;  \n    } else {\n        mail.value = \" \";\n        message.value = \" \";\n    }\n}\n\nform.addEventListener(\"submit\", afterSubmit)\n\nfunction afterSubmit(event) {\n    event.preventDefault();\n    console.log(parsedInput)\n    form.reset();\n    storage.default.remove(LOCALSTORAGE_KEY);\n}","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n    try {\n        localStorage.removeItem(key);\n    } catch (error) {\n        console.error(\"Remove state error:\", error.message)\n    }\n};\n\nexport default {\n    save,\n    load,\n    remove,\n};"],"names":["$kEUo3","parcelRequire","$3fff5e8daf4b13a6$export$2e2bcd8739ae039","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","removeItem","$945622fd0f572e60$var$mail","document","querySelector","$945622fd0f572e60$var$message","$945622fd0f572e60$var$form","addEventListener","$parcel$interopDefault","throttle","feedback","email","$945622fd0f572e60$var$parsedInput","window","event","preventDefault","log","reset"],"version":3,"file":"03-feedback.f466417f.js.map"}